# RocoR's OI Note ç¬¬ä¸€ç«  ç®—æ³•åŸºç¡€

æœ¬ç¬”è®°åŸºäºAcWingã€Šç®—æ³•åŸºç¡€è¯¾ã€‹ç¬¬1ç«  ç®—æ³•åŸºç¡€

## æ’åº

### å¿«é€Ÿæ’åº

> **ä¸»è¦æ€æƒ³**
>
> 1. ç¡®å®šåˆ†ç•Œç‚¹ï¼š
>
>    * `x = a[l]`
>
>    * `x = a[r]`
>
>    * `q = a[(l + r) / 2]`
>
> 2. è°ƒæ•´èŒƒå›´ï¼š
>    * å·¦è¾¹`<=x`
>
>    * å³è¾¹`>x`
>
> 3. é€’å½’å¤„ç†å·¦è¾¹å’Œå³è¾¹
>
> **æ¨¡æ¿ï¼š**
>
> ```cpp
> void quick_sort(int q[], int l, int r)
> {
>     if (l >= r) return;
> 
> 	int i = l - 1, j = r + 1, x = q[l + r >> 1];
> 	while (i < j)
> 	{
>    		do i ++ ; while (q[i] < x);         // å¯æ¢æˆ while(q[ ++ i ] < x);
>     	do j -- ; while (q[j] > x);         // å¯æ¢æˆ while(q[ -- j ] > x);
>     	if (i < j) swap(q[i], q[j]);
> 	}
> 	quick_sort(q, l, j), quick_sort(q, j + 1, r);
> }
> 
> quick_sort(a, 0, n - 1);            // è°ƒç”¨æ–¹æ³•
> ```
> 
> **è¯´æ˜ï¼š**
> 
>å¦‚æœ`x`é€‰å–`q[l]`ï¼Œåˆ™é€’å½’æ—¶å‚æ•°èŒƒå›´é€‰æ‹©`(l, j)`å’Œ`(j + 1, r)`
> å¦‚æœ`x`é€‰å–`q[r]`ï¼Œåˆ™é€’å½’æ—¶å‚æ•°èŒƒå›´é€‰æ‹©`(l, i - 1)`å’Œ`(i, r)`
>å¦‚æœ`x`é€‰å–`q[l + r >> 1]`ï¼Œåˆ™é€’å½’æ—¶å‚æ•°èŒƒå›´é€‰æ‹©å“ªç§éƒ½è¡Œ
> 
> **è¯æ˜ï¼š**
> 
>åä¾‹ï¼š
> 
>å¦‚æœç®—æ³•`x`é€‰å–`q[l]`ï¼Œå³`x = q[0] = 1`ï¼Œé€’å½’æ—¶å‚æ•°èŒƒå›´é€‰æ‹©`(l, i - 1)`å’Œ`(i, r)`ï¼Œåˆ™ä¸‹ä¸€æ¬¡è¿­ä»£å`i = 0`ï¼Œ`j = 0`ï¼Œé€’å½’æ—¶å‚æ•°çš„èŒƒå›´ä¸º`(0, -1)`å’Œ`(0, 1)`ï¼Œå…¶ä¸­ç¬¬`1`ä¸ªé€’å½’æ— æ•ˆï¼Œç¬¬`2`ä¸ªé€’å½’ä¸ä¹‹å‰ä¸€è‡´ï¼Œé™·å…¥æ­»å¾ªç¯ã€‚
> 
>åŒç†å¦‚æœç®—æ³•`x`é€‰å–`q[r]`ï¼Œå³`x = q[1] = 2`ï¼Œé€’å½’æ—¶å‚æ•°èŒƒå›´é€‰æ‹©`(l, j`)å’Œ`(j + 1, r)`ï¼Œåˆ™ä¸‹ä¸€æ¬¡è¿­ä»£å`i = 1`ï¼Œ`j = 1`ï¼Œé€’å½’æ—¶å‚æ•°çš„èŒƒå›´ä¸º`(0, 1)`å’Œ`(2, 1)`ï¼Œå…¶ä¸­ç¬¬`2`ä¸ªé€’å½’æ— æ•ˆï¼Œç¬¬`1`ä¸ªé€’å½’ä¸ä¹‹å‰ä¸€è‡´ï¼Œé™·å…¥æ­»å¾ªç¯ã€‚
> 
>**æ³¨æ„ï¼š**
> 
>å¿«é€Ÿæ’åºåœ¨å¯¹å«æœ‰é‡å¤å…ƒç´ çš„æ•°ç»„æ’åºæ—¶æ˜¯**ä¸ç¨³å®š**çš„ï¼Œä½†å¯ä»¥æŠŠå…ƒç´ å€¼å’Œå…¶ä¸‹æ ‡ç»„æˆ**äºŒå…ƒç»„**`{q[i], i}`åå†æ’åºï¼Œè¿™æ ·å°±èƒ½ä½¿æ’åºç»“æœç¨³å®šã€‚
> 
>åº”ç”¨ï¼š
> [786.ç¬¬kä¸ªæ•°]([786. ç¬¬kä¸ªæ•° - AcWingé¢˜åº“](https://www.acwing.com/problem/content/788/))

### å½’å¹¶æ’åº

> **ä¸»è¦æ€æƒ³ï¼š**
>
> 1. ç¡®å®šåˆ†ç•Œç‚¹`mid = (l + r) / 2`
> 2. é€’å½’å¤„ç†å·¦å³ä¸¤æ®µ
> 3. äºŒè·¯å½’å¹¶ï¼ˆåŒæŒ‡é’ˆç®—æ³•ï¼ŒæŒ‡é’ˆè¡¨ç¤ºå‰©ä½™éƒ¨åˆ†ä¸­**æœ€å°å…ƒç´ **çš„ä½ç½®ï¼‰
> **æ¨¡æ¿ï¼š**
> ```cpp
> int tmp[N];         // å½’å¹¶æ­¥éª¤ç”¨
> void merge_sort(int q[], int l, int r)
> {
>     if (l >= r) return;
> 
>     int mid = l + r >> 1;
>     merge_sort(q, l, mid);
>     merge_sort(q, mid + 1, r);
> 
>     int k = 0, i = l, j = mid + 1;
>     while (i <= mid && j <= r)
>         if (q[i] <= q[j]) tmp[k ++ ] = q[i ++ ];
>         else tmp[k ++ ] = q[j ++ ];
> 
>     while (i <= mid) tmp[k ++ ] = q[i ++ ];
>     while (j <= r) tmp[k ++ ] = q[j ++ ];
> 
>     for (i = l, j = 0; i <= r; i ++, j ++ ) q[i] = tmp[j];
> }
> 
> merge_sort(a, 0, n - 1);        // è°ƒç”¨æ–¹æ³•
> ```
> **æ³¨æ„ï¼š**
> åœ¨å½’å¹¶æ­¥éª¤æ—¶ï¼Œå¦‚æœç¢°åˆ°ç›¸åŒå…ƒç´ çš„æ’å…¥ï¼Œæ¯æ¬¡éƒ½é€‰æ‹©ç¬¬1æ®µï¼ˆå·¦è¾¹ï¼‰çš„å…ƒç´ æ’å…¥ï¼Œåˆ™èƒ½ä½¿å½’å¹¶ç®—æ³•**ç¨³å®š**ã€‚
>
> **åº”ç”¨ï¼š**
> [788. é€†åºå¯¹çš„æ•°é‡]([788. é€†åºå¯¹çš„æ•°é‡ - AcWingé¢˜åº“](https://www.acwing.com/problem/content/790/))

## äºŒåˆ†

### æ•´æ•°äºŒåˆ†ï¼š

>  **æ¨¡æ¿:**
> ```cpp
> bool check(int x) {/* ... */} // æ£€æŸ¥xæ˜¯å¦æ»¡è¶³æŸç§æ€§è´¨
> 
> // å¯»æ‰¾å·¦åŠè¾¹è¾¹ç•Œ
> int bsearch_left(int l, int r)
> {
>     while (l < r)
>     {
>         int mid = l + r + 1 >> 1;   // è®©ä¸‹å–æ•´å˜æˆä¸Šå–æ•´ï¼Œé¿å…l = midå‡ºç°æ­»å¾ªç¯
>         if (check(mid)) l = mid;    // a[mid]æ»¡è¶³å·¦åŠè¾¹æ€§è´¨ï¼Œåº”åœ¨[mid, r]ç»§ç»­å¯»æ‰¾
>         else r = mid - 1;   // a[mid]ä¸æ»¡è¶³å·¦åŠè¾¹æ€§è´¨ï¼Œåº”åœ¨[l, mid - 1]ç»§ç»­å¯»æ‰¾
>     }
>     return l;   // äºŒåˆ†ç»“æŸåï¼Œl == rã€‚å¦‚æœä¸€å®šå­˜åœ¨å·¦åŠè¾¹çš„è¾¹ç•Œï¼Œlå’Œréƒ½æ˜¯ç»“æœã€‚å¦‚æœä¸ä¸€å®šå­˜åœ¨å·¦åŠè¾¹çš„è¾¹ç•Œï¼Œéœ€è¦åšifåˆ¤æ–­
> }
> 
> // å¯»æ‰¾å³åŠè¾¹è¾¹ç•Œ
> int bsearch_right(int l, int r)
> {
>     while (l < r)
>     {
>         int mid = l + r >> 1;
>         if (check(mid)) r = mid;    // a[mid]æ»¡è¶³å³åŠè¾¹æ€§è´¨ï¼Œåº”åœ¨[l, mid]ç»§ç»­å¯»æ‰¾
>         else l = mid + 1;       // a[mid]ä¸æ»¡è¶³å³åŠè¾¹æ€§è´¨ï¼Œåº”åœ¨[mid + 1, r]ç»§ç»­å¯»æ‰¾
>     }
>     return l;   // äºŒåˆ†ç»“æŸåï¼Œl == rã€‚å¦‚æœä¸€å®šå­˜åœ¨å³åŠè¾¹çš„è¾¹ç•Œï¼Œlå’Œréƒ½æ˜¯ç»“æœã€‚å¦‚æœä¸ä¸€å®šå­˜åœ¨å³åŠè¾¹çš„è¾¹ç•Œï¼Œéœ€è¦åšifåˆ¤æ–­
> }
> ```
>
> **ç†è§£ï¼š**
> äºŒåˆ†çš„æœ¬è´¨æ˜¯å¯»æ‰¾è¾¹ç•Œï¼šå¦‚æœä¸€ç»„æ•°èƒ½æ ¹æ®æŸä¸ªæ€§è´¨ä¸€åˆ†ä¸ºäºŒï¼Œåˆ™å¯å¿«é€Ÿé€šè¿‡äºŒåˆ†æ‰¾åˆ°è¾¹ç•Œã€‚å®ƒæœ‰ä¸¤ç§æ¨¡æ¿ï¼šå¯»æ‰¾å·¦åŠè¾¹çš„è¾¹ç•Œå’Œå³åŠè¾¹çš„è¾¹ç•Œã€‚
>
> å¯»æ‰¾å·¦åŠè¾¹è¾¹ç•Œéœ€è¦+1çš„åŸå› ï¼šå½“`l`å’Œ`r`åªç›¸å·®1ï¼Œå³`l == r - 1`æ—¶ã€‚`mid = (l + r) / 2 = l`ã€‚è‹¥æ­¤æ—¶`a[mid]`æ»¡è¶³å·¦è¾¹è¾¹æ€§è´¨ï¼Œåˆ™æœ‰`(l, r)â†’(mid, r)=(l, r)`ï¼Œæœç´¢åŒºé—´ä¸å˜ï¼Œåˆ™é™·å…¥æ­»å¾ªç¯ã€‚è‹¥+1ï¼Œåˆ™ä¸‹å–æ•´å˜æˆä¸Šå–æ•´ï¼Œæ­¤æ—¶`mid = (l + r + 1) / 2 = r`ã€‚è‹¥æ­¤æ—¶`a[mid]`æ»¡è¶³å·¦è¾¹è¾¹æ€§è´¨ï¼Œåˆ™æœ‰`(l, r)â†’(mid, r)=(r, r)`ï¼Œåˆ™ç»“æœä¸º`r`ï¼Œä¸ä¼šé™·å…¥æ­»å¾ªç¯ã€‚
>
> å®é™…è¿ç”¨æ—¶ï¼Œå…ˆä¸è€ƒè™‘ç”¨å“ªä¸ªæ¨¡æ¿ï¼Œè€Œæ˜¯å…ˆå†™`check()`å‡½æ•°ï¼Œç„¶åå†™æ¨¡æ¿ï¼ˆä¸è€ƒè™‘`mid`æ˜¯å¦`+1`ï¼‰ï¼Œå†™åˆ°`if(check(mid))`æ—¶ï¼Œå†è€ƒè™‘æ»¡è¶³`check(mid)`çš„æ®µæ˜¯åœ¨å“ªä¸€è¾¹ï¼šå¦‚æœåœ¨å·¦è¾¹ï¼Œåˆ™å¡«`l = mid`ï¼›å¦‚æœåœ¨å³è¾¹ï¼Œåˆ™å¡«`r = mid`ã€‚ç„¶åå¡«å‡º`else`çš„éƒ¨åˆ†ï¼Œå¦‚æœå­˜åœ¨`l = mid`ï¼Œåˆ™è¦åœ¨`mid`å£°æ˜å¤„`+1`ï¼›åä¹‹ä¸è¡¥ã€‚
>
> **è¯´æ˜ï¼š**
>
> * æ•´æ•°äºŒåˆ†ä¸ä»…ä»…é€‚ç”¨**å•è°ƒæ€§**ï¼Œåªè¦å­˜åœ¨**æŸç§æ€§è´¨**èƒ½æŠŠåºåˆ—åˆ†æˆè¿ç»­çš„ä¸¤æ®µå°±å¯ä»¥ï¼Œå³`check()`å‡½æ•°
>
> * äºŒåˆ†ä¸å•è°ƒæ€§æ²¡æœ‰å¿…ç„¶å…³ç³»ï¼šæœ‰å•è°ƒæ€§çš„é¢˜ç›®ä¸€å®šå¯ä»¥äºŒåˆ†ï¼›å¯ä»¥äºŒåˆ†çš„é¢˜ç›®ï¼Œä¸ä¸€å®šè¦ç”¨å•è°ƒæ€§ã€‚

### æµ®ç‚¹æ•°äºŒåˆ†

> ```cpp
> bool check(double x) {/* ... */} // æ£€æŸ¥xæ˜¯å¦æ»¡è¶³æŸç§æ€§è´¨
> 
> double bsearch_3(double l, double r)
> {
>     const double eps = 1e-6;   // eps è¡¨ç¤ºç²¾åº¦ï¼Œå–å†³äºé¢˜ç›®å¯¹ç²¾åº¦çš„è¦æ±‚
>     while (r - l > eps)
>     {
>         double mid = (l + r) / 2;
>         if (check(mid)) r = mid;
>         else l = mid;
>     }
>     return l;
> }
> ```
>
> **è¯´æ˜ï¼š**
>
> * æµ®ç‚¹æ•°äºŒåˆ†ä¸éœ€è¦è€ƒè™‘`mid`æ˜¯å¦`+1`ï¼Œ`else`åæ˜¯å¦`+1`ã€‚
>
> * æ²¡æœ‰å›ºå®šçš„æµ®ç‚¹æ•°åºåˆ—ï¼Œå› æ­¤è¦è€ƒè™‘ç²¾åº¦`eps`ï¼Œä¸€èˆ¬æ¯”é¢˜ç›®è¦æ±‚å¤š2ä½å°æ•°å°±è¡Œ
>
> * éœ€è¦è‡ªå·±ç¡®å®š`l`å’Œ`r`çš„å€¼ï¼Œå³æŸ¥æ‰¾èŒƒå›´
>   åº”ç”¨ï¼š
>
> [æ•°çš„ä¸‰æ¬¡æ–¹æ ¹]([790. æ•°çš„ä¸‰æ¬¡æ–¹æ ¹ - AcWingé¢˜åº“](https://www.acwing.com/problem/content/792/))

## é«˜ç²¾åº¦è®¡ç®—

### å¤§æ•´æ•°è¯»å…¥/å­˜å‚¨

> **æ¨¡æ¿ï¼š**
>
> ```cpp
> vector<int> A;
> string a;
> cin >> a;
> for (int i = a.size() - 1; i >= 0; i--) A.push_back(a[i] - '0');
> ```
>
> **è¯´æ˜ï¼š**
> è¿™é‡Œå‡è®¾å¤§æ•´æ•°æ˜¯**éè´Ÿæ•°**
> æ•°ç»„Aä¸­`0`å¯¹åº”å¤§æ•´æ•°çš„æœ€ä½ä½ï¼ˆä¸ªä½ï¼‰ï¼Œ`n-1`å¯¹åº”æœ€é«˜ä½ï¼Œä¹Ÿå°±æ˜¯å€’ç€å­˜
>
> | æ•°ç»„ä¸‹æ ‡     | 0    | 1    | 2    | 3    | 4    |
> | ------------ | ---- | ---- | ---- | ---- | ---- |
> | åŸæ•°ï¼ˆ8765ï¼‰ | 8    | 7    | 6    | 5    | -    |
> | å­˜å‚¨æ•°       | 5    | 6    | 7    | 8    |      |

### å¤§æ•´æ•°æ¯”è¾ƒ

> **æ¨¡æ¿ï¼š**
>
> ```cpp
> // A >= Bè¿”å›trueï¼Œå¦åˆ™è¿”å›false
> bool cmp(vector<int>& A, vector<int>& B) {
>     if (A.size() != B.size()) return A.size() > B.size(); 		//å…ˆæ¯”è¾ƒä½æ•°
>     for (int i = A.size() - 1; i >= 0; i--) 		//ä½æ•°ç›¸åŒï¼Œåˆ™ä»é«˜ä½å¼€å§‹é€ä½æ¯”è¾ƒ
>         if (A[i] != B[i])
>             return A[i] > B[i];
>     return true; 		//è¿è¡Œåˆ°æ­¤å¤„è¯´æ˜A == Bï¼Œè¿”å›true
> }
> ```

### å¤§æ•´æ•°åŠ æ³•

> **æ¨¡æ¿ï¼š**
>
> ```cpp
> // C = A + B, A >= 0, B >= 0
> vector<int> bigAdd(vector<int> &A, vector<int> &B)
> {
>  	if (A.size() < B.size()) return add(B, A);
> 
>  	vector<int> C;
>  	int t = 0;
>  	for (int i = 0; i < A.size(); i ++ )
>  	{
>      		t += A[i];
>      		if (i < B.size()) t += B[i];
>      		C.push_back(t % 10);
>      		t /= 10; 		//è¿›ä½ï¼Œå‚ä¸ä¸‹ä¸€æ¬¡å¾ªç¯ï¼ˆå³æ›´é«˜ä¸€ä½ï¼‰çš„åŠ æ³•è¿ç®—
>  	}
> 
>  	if (t) C.push_back(t); 		//æœ€åä¸€æ¬¡å¾ªç¯ç»“æŸåï¼Œå¯èƒ½è¿˜æœ‰è¿›ä½ï¼Œè‹¥æœ‰åˆ™ç»“æœåŠ ä¸€ä½
>  	return C;
> }
> ```
>
> **è¯´æ˜ï¼š**
>
> * æ¨¡æ¿å‡è®¾Aå’ŒBéƒ½æ˜¯éè´Ÿå¤§æ•´æ•°
>
> * å‡è®¾å¤§æ•´æ•°Açš„ä½æ•°â‰¥å¤§æ•´æ•°Bï¼Œä¸æ»¡è¶³è¦äº¤æ¢å‚æ•°æ¬¡åº
>
> * å¤§æ•´æ•°ä½ä½å­˜æ”¾åœ¨æ•°ç»„ä½åœ°å€å¤„ï¼Œé«˜ä½å­˜æ”¾åœ¨æ•°ç»„é«˜åœ°å€å¤„
>
> * æ•°ç»„åœ°å€ç”±ä½åˆ°é«˜ï¼ˆ0â†’n - 1ï¼‰
>
> * æ•´æ•°ä½æ•°æœ€å·¦è¾¹æ˜¯é«˜ä½ï¼Œæœ€å³è¾¹æ˜¯ä½ä½ï¼ˆé«˜ä½â†’ä½ä½ï¼‰
>
> * æ³¨æ„å¤„ç†æœ€é«˜ä½è¿›ä½
>
> * è¯»å–æ•°ç»„æ—¶åå‘(n-1â†’0)éå†ï¼Œè¿ç®—æ—¶æ­£å‘(0â†’n-1)éå†
>
> * é«˜ç²¾åº¦åŠ æ³•ä¸ä¼šå‡ºç°å‰å¯¼0ï¼Œè€Œå‡æ³•ã€ä¹˜æ³•å’Œé™¤æ³•ä¼šå‡ºç°å‰å¯¼0
>

### é«˜ç²¾åº¦å‡æ³•

> **æ¨¡æ¿ï¼š**
>
> ```cpp
> // C = A - B, æ»¡è¶³A >= B, A >= 0, B >= 0
> vector<int> bigSub(vector<int> &A, vector<int> &B)
> {
>    	vector<int> C;
>    	for (int i = 0, t = 0; i < A.size(); i ++ )
>     	{
>         	t = A[i] - t;
>         	if (i < B.size()) t -= B[i];
>         	C.push_back((t + 10) % 10);             // æ¶µç›–tä¸ºæ­£æ•°è´Ÿæ•°ä¸¤ç§æƒ…å†µ
>         	if (t < 0) t = 1; 		//å¤„ç†å€Ÿä½ï¼Œå‚ä¸ä¸‹ä¸€æ¬¡è¿ç®—
>         	else t = 0;
>     	}
> 
>     	while (C.size() > 1 && C.back() == 0) C.pop_back();     // å»æ‰å‰å¯¼0ï¼Œä½†ä¸èƒ½æŠŠç»“æœ`0`å»æ‰
>     	return C;
> }
> ```
>
> **è¯´æ˜ï¼š**
>
> * æ¨¡æ¿å‡è®¾`A`å’Œ`B`éƒ½æ˜¯éè´Ÿå¤§æ•´æ•°ï¼Œä¸”`A`â‰¥`B`ï¼Œå¯ç”¨`cmp()`æ¨¡æ¿åˆ¤æ–­æ˜¯å¦æ»¡è¶³`A`â‰¥`B`ï¼Œä¸æ»¡è¶³äº¤æ¢å‚æ•°æ¬¡åºå³å¯
>
> * `(t + 10) % 10`æ¶µç›–äº†`t`æ­£è´Ÿä¸¤ç§æƒ…å†µ
>
>   * `t >= 0`è¾“å‡º`t % 10`
>
>   * `t < 0`è¾“å‡º`t + 10`
>
> * å‡æ³•ä¼šäº§ç”Ÿå¤šä¸ªå‰å¯¼`0`
>
> * å»æ‰å‰å¯¼`0`æ—¶ï¼Œæ³¨æ„ä¸èƒ½æŠŠç»“æœ`0`ä¹Ÿå»æ‰ï¼Œå³éœ€è¦åˆ¤æ–­`C.size() > 1`

### é«˜ç²¾åº¦ä¹˜æ³•

> **æ¨¡æ¿ï¼š**
>
> ```cpp
> // C = A * b, A >= 0, b > 0
> vector<int> bigMul(vector<int> &A, int b)
> {
>     vector<int> C;
> 
>     int t = 0;
>     for (int i = 0; i < A.size() || t; i ++ )	//æ³¨æ„t
>     {
>         if (i < A.size()) t += A[i] * b;
>         C.push_back(t % 10);
>         t /= 10;	//è¿›ä½ï¼Œå‚ä¸ä¸‹ä¸€æ¬¡è¿ç®—
>     }
> 
>     while (C.size() > 1 && C.back() == 0) C.pop_back();
> 
>     return C;
> }
> ```
>
> **è¯´æ˜ï¼š**
>
> * æ¨¡æ¿å‡è®¾`A`æ˜¯éè´Ÿå¤§æ•´æ•°ï¼Œ`b`æ˜¯åŸºæœ¬ç±»å‹`int`
>
> * ä¹˜æ³•æ¨¡æ¿æŠŠå¯¹æœ€é«˜ä½çš„è¿›ä½çš„å¤„ç†ç¿»åˆ°äº†`for`çš„å¾ªç¯æ¡ä»¶ä¸­ï¼Œè¿™æ˜¯ä¸åŠ æ³•çš„ä¸»è¦åŒºåˆ«ã€‚åŠ æ³•ä¹‹æ‰€ä»¥èƒ½ç”¨ä¸€ä¸ª`if`å°±èƒ½è§£å†³æœ€é«˜ä½çš„è¿›ä½é—®é¢˜ï¼Œæ˜¯å› ä¸ºé«˜ç²¾åº¦åŠ æ³•æœ€é«˜ä½è¿›ä½ä¸ä¼šè¶…è¿‡10ï¼ˆå®é™…ä¸Šæœ€å¤šæ˜¯1ï¼‰ï¼Œè€Œé«˜ç²¾åº¦ä¹˜æ³•çš„æœ€é«˜ä½è¿›ä½å¯èƒ½è¶…è¿‡10ï¼Œç”šè‡³æ›´é«˜ï¼Œå› æ­¤ä¸èƒ½åƒåŠ æ³•é‚£æ ·å¤„ç†

### é«˜ç²¾åº¦é™¤æ³•

> **æ¨¡æ¿ï¼š**
>
>  ```cpp
>  // A / b = C ... r, A >= 0, b > 0
>  vector<int> bigDiv(vector<int> &A, int b, int &r)
>  {
>      vector<int> C;
>      r = 0;
>      for (int i = A.size() - 1; i >= 0; i -- )
>      {
>          r = r * 10 + A[i];
>          C.push_back(r / b);
>          r %= b;	//ä½™æ•°ï¼Œä¹˜10åå‚ä¸ä¸‹ä¸€ä½é™¤æ³•
>      }
>      reverse(C.begin(), C.end());	//Cæ˜¯ä»é«˜ä½å¼€å§‹å½•å…¥çš„ï¼Œä¸å¸¸è§„å¤§æ•´æ•°å­˜å‚¨æ–¹å¼ç›¸åï¼Œæ•…åè½¬
>      while (C.size() > 1 && C.back() == 0) C.pop_back();
>      return C;
>  }
>  ```
>
> **è¯´æ˜ï¼š**
>
> * æ¨¡æ¿å‡è®¾`A`æ˜¯éè´Ÿå¤§æ•´æ•°ï¼Œ`b`æ˜¯åŸºæœ¬ç±»å‹`int`
>
> * å•†ç”¨`vector<int>`ä¿å­˜ï¼Œä½™æ•°ç”¨å‚æ•°`r`ä¿å­˜
>
> * é™¤æ³•æ˜¯åå‘éå†ï¼ˆé«˜ä½åˆ°ä½ä½ï¼‰
>
> * ç»“æœè¦ç¿»è½¬ï¼Œæ³¨æ„å¯¼å…¥`<algorithm>`åº“
>
> * æ³¨æ„éå†æ—¶ï¼Œ`r = r * 10 + A[i]`;æ˜¯`=`ï¼Œè€Œä¸æ˜¯`+=`

## å‰ç¼€å’Œ

**å®šä¹‰ï¼š*

å‰ç¼€å’Œå¯ä»¥ç®€å•ç†è§£ä¸ºã€Œæ•°åˆ—çš„å‰ ğ‘›![n](data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7) é¡¹çš„å’Œã€ï¼Œæ˜¯ä¸€ç§é‡è¦çš„é¢„å¤„ç†æ–¹å¼ã€‚

### ä¸€ç»´å‰ç¼€å’Œ

> **å®šä¹‰ï¼š**
>
> â€‹				**$S_k = \sum_{i=1}^{k} a_i$**
>
> â€‹	**$S_0 = a_0 = 0 \quad a_l + a_{l+1} + \cdots + a_r = S_r - S_{l-1}$**
>
> **ç¤ºæ„å›¾ï¼š**
>
>![45680_eac24b0f07-ä¸€ç»´å‰ç¼€å’Œ](https://github.com/user-attachments/assets/6e5b4496-85c2-43e2-8194-20dbe1591e8c)

>
> **æ¨¡æ¿ï¼š**
>
> ```cpp
> int a[N], S[N];
> // å·²ç»™å®šæ•°ç»„aï¼Œåˆå§‹åŒ–å‰ç¼€å’Œæ•°ç»„S
> for (int i = 1; i <= n; i++) S[i] = S[i - 1] + a[i];
> 
> // æœªç»™å®šæ•°ç»„aï¼Œå¯åˆå¹¶è¯»å…¥å’Œåˆå§‹åŒ–çš„è¿‡ç¨‹
> for (int i = 1; i <= n; i++)
> {
>  scanf("%d", &a[i])        
>  S[i] = S[i - 1] + a[i];
> }
> 
> cout << S[r] - S[l - 1] << endl;                        // è®¡ç®—a[l] + ... + a[r]
> ```
>
> ç¬”è®°ï¼š
>
> * å‡è®¾$S_0=a_0=0$
>
> * å¤æ‚åº¦ç”±`O(n)`é™ä¸º`O(1)`
>
> * æ•°ç»„`a`å’Œ`S`çš„ç¬¬1ä¸ªå…ƒç´ éƒ½ä¸å­˜å‚¨ï¼ˆä¸‹æ ‡ä¸º0ï¼‰ï¼Œè€Œä»ç¬¬2ä¸ªå…ƒç´ å¼€å§‹å­˜å‚¨ï¼ˆä¸‹æ ‡ä¸º1ï¼‰ï¼Œè¿™æ ·æ›´ç¬¦åˆæ•°å­¦è®¡ç®—è§„èŒƒ
>
> * æ³¨æ„éå†èŒƒå›´æ˜¯`1 ~ n`
>
> * åœ¨ä¸€äº›ä¸æ¶‰åŠ`a[i]`çš„é¢˜ç›®ä¸­ï¼Œä¸å¿…è¦å­˜å‚¨`a[i]`çš„å€¼ï¼Œåªéœ€è¦å­˜å‚¨`S[i]`å°±è¶³å¤Ÿ

### äºŒç»´å‰ç¼€å’Œ

> **å®šä¹‰ï¼š**
>
> â€‹		**$S_{x,y} = \sum_{i=1}^{x} \sum_{j=1}^{y} a_{i,j} = S_{x-1,y} + S_{x,y-1} - S_{x-1,y-1} + a_{x,y} \\$**
> â€‹		**$S_{0,*} = S_{*,0} = a_{0,*} = a_{*,0} = 0 \\$ **
> â€‹	    ï¼ˆæŠŠç¬¬0è¡Œã€ç¬¬0åˆ—æ‰€æœ‰å…ƒç´ å‡å®šä¹‰ä¸º0ï¼Œä»1å¼€å§‹æ“ä½œï¼Œè¿™æ ·æ›´ç¬¦åˆæ•°å­¦è®¡ç®—è§„èŒƒï¼‰
>
> â€‹		**$\sum_{i=x_1}^{x_2} \sum_{j=y_1}^{y_2} a_{i,j} = S_{x_2,y_2} - S_{x_1-1,y_2} - S_{x_2,y_1-1} + S_{x_1-1,y_1-1}$**
>
> **ç¤ºæ„å›¾ï¼š**
>
> ![45680_048ede7607-äºŒç»´å‰ç¼€å’Œ](https://github.com/user-attachments/assets/589200d1-c8fc-44a0-ac48-e0047d296e70)

>
> **æ¨¡æ¿ï¼š**
>
> ```cpp
> int a[N][N], S[N][N];
> 
> // ç»™å®šæ•°ç»„a
> for (int i = 1; i <= n; i++)
>     for (int j = 1; j <= m; j++) 
>         S[i][j] = S[i - 1][j] + S[i][j - 1] - S[i - 1][j - 1] + a[i][j];
> 
> // æ²¡æœ‰ç»™å®šæ•°ç»„aï¼Œéœ€è¦è¯»å…¥å¹¶åˆå§‹åŒ–å‰ç¼€å’Œæ•°ç»„ï¼Œåˆ™å¯ä»¥åˆå¹¶è¯»å…¥å’Œåˆå§‹åŒ–çš„è¿‡ç¨‹
> for (int i = 1; i <= n; i++)
>     for (int j = 1; j <= m; j++) {
>         scanf("%d", &a[i][j]);
>         S[i][j] = S[i - 1][j] + S[i][j - 1] - S[i - 1][j - 1] + a[i][j];
>     }
> 
> cout << S[x2][y2] - S[x2][y1 - 1] - S[x1 - 1][y2] + S[x1 - 1][y1 - 1] << endl;
> ```
>
> **è¯´æ˜ï¼š**
>
> * å‡è®¾æ•°ç»„`a`ä¸­è¡Œä¸‹æ ‡æˆ–åˆ—ä¸‹æ ‡ä¸º`0`çš„é¡¹éƒ½æ˜¯`0`
>
> * å¤æ‚åº¦ç”±`O(m * n)`é™ä¸º`O(1)`
>
> * è¯»å…¥æ•°ç»„`a`å’Œåˆå§‹åŒ–å‰ç¼€å’Œæ•°ç»„`S`çš„è¿‡ç¨‹å¯ä»¥åˆå¹¶åœ¨ä¸€èµ·
>
> * æ³¨æ„éå†èŒƒå›´æ˜¯`1 ~ n`
>
> * åœ¨ä¸€äº›ä¸æ¶‰åŠ`a[i][j]`çš„é¢˜ç›®ä¸­ï¼Œä¸å¿…è¦å­˜å‚¨`a[i][j]`çš„å€¼ï¼Œåªéœ€è¦å­˜å‚¨`S[i][j]`å°±è¶³å¤Ÿ

## å·®åˆ†

**å®šä¹‰ï¼š**

å·®åˆ†æ˜¯ä¸€ç§ä¸å‰ç¼€å’Œç›¸å¯¹çš„ç­–ç•¥ï¼Œæ˜¯å‰ç¼€å’Œçš„é€†è¿ç®—ã€‚ç›¸è¾ƒäºç»™å®šæŸä¸€åºåˆ—æ±‚å®ƒçš„å·®åˆ†ï¼Œç«èµ›ä¸­æ›´ä¸ºå¸¸è§çš„æƒ…æ™¯æ˜¯ï¼Œé€šè¿‡ç»´æŠ¤å·®åˆ†åºåˆ—çš„ä¿¡æ¯ï¼Œå®ç°å¤šæ¬¡åŒºé—´ä¿®æ”¹ã€‚åœ¨åŒºé—´ä¿®æ”¹ç»“æŸåï¼Œå¯ä»¥é€šè¿‡æ±‚å…¶å‰ç¼€å’Œæ¢å¤åŸåºåˆ—çš„ä¿¡æ¯ï¼Œå®ç°å¯¹åŸåºåˆ—çš„æŸ¥è¯¢ã€‚æ³¨æ„ä¿®æ”¹æ“ä½œä¸€å®šè¦åœ¨æŸ¥è¯¢æ“ä½œä¹‹å‰ã€‚

### ä¸€ç»´å·®åˆ†

> ç»™åŒºé—´[l,r]ä¸­çš„æ¯ä¸ªæ•°åŠ ä¸Šc:
>
> **æ¨¡æ¿ï¼š**
>
> ```cpp
> int a[N], B[N];
> 
> void insert(int l, int r, int c) {
>     B[l] += c;
>     B[r + 1] -= c;
> }
> 
> // åˆå§‹åŒ–å·®åˆ†æ•°ç»„
> for (int i = 1; i <= n; i++) {
>     scanf("%d", &a[i]);
>     insert(i, i, a[i]);
> }
> 
> // å¯¹æ“ä½œåçš„å·®åˆ†æ•°ç»„æ±‚å‰ç¼€å’Œæ•°ç»„ï¼Œå¾—åˆ°æ”¹å˜åçš„åŸæ•°ç»„
>for (int i = 1; i <= n; i++) {
>     a[i] = a[i - 1] + B[i];
>}
> ```
>
> **è¯´æ˜ï¼š**
>
> * å¤æ‚åº¦ç”±`O(n)`é™ä¸º`O(1)`
>
> * ç”¨`insert(i, i, a[i])`ä¸`B[i] = a[i]`åˆå§‹åŒ–å·®åˆ†æ•°ç»„çš„åŒºåˆ«åœ¨äºï¼Œå‰è€…æ„é€ çš„å·®åˆ†æ•°ç»„`B[n]`ç­‰äº`-B[n - 1]`ï¼Œè€Œåè€…ç­‰äº`0`
>
> * è¯»å…¥æ•°ç»„`a`å’Œåˆå§‹åŒ–å·®åˆ†æ•°ç»„`B`çš„è¿‡ç¨‹å¯ä»¥åˆå¹¶åœ¨ä¸€èµ·
>
> * æ³¨æ„éå†èŒƒå›´æ˜¯`1 ~ n`
>
> * åœ¨ä¸€äº›ä¸æ¶‰åŠ`a[i]`çš„é¢˜ç›®ä¸­ï¼Œä¸å¿…è¦å­˜å‚¨`a[i]`çš„å€¼ï¼Œåªéœ€è¦å­˜å‚¨`S[i]`å°±è¶³å¤Ÿ

### äºŒç»´å·®åˆ†

> ç»™[x1,y1]ä¸[x2,y2]æ„æˆçš„çŸ©å½¢èŒƒå›´å†…çš„æ¯ä¸ªæ•°åŠ ä¸Šc:
>
> **æ¨¡æ¿ï¼š**
>
> ```cpp
>int a[N][N], b[N][N];
>
>void insert(int x1,int y1, int x2, int y2, int c){
>  b[x1][y1] += c;
>  b[x2 + 1][y1] -= c;
>  b[x1][y2 + 1] -= c;
>  b[x2 + 1][y2 + 1] += c;
>}
>
>// è¯»å…¥åŸçŸ©é˜µ
>for (int i = 1; i <= n; i++)
>  for (int j = 1; j <= m; j++)
>    cin >> a[i][j];
>
>// åˆå§‹åŒ–å·®åˆ†çŸ©é˜µ
>for (int i = 1; i <= n; i++)
>  for (int j = 1; j <= m; j++)
>    insert(i, j, i, j, a[i][j]);
>// ä¸Šé¢ä¸¤æ­¥å¯åˆå¹¶
>
>// æ“ä½œå·®åˆ†çŸ©é˜µ
>while(q--){
>  int x1, y1, x2, y2, c;
>  cin >> x1 >> y1 >> x2 >> y2 >> c;
>  insert(x1, y1, x2, y2, c);
>}
>
>//å¯¹æ“ä½œåçš„å·®åˆ†çŸ©é˜µæ±‚å‰ç¼€å’ŒçŸ©é˜µï¼Œå¾—åˆ°æ”¹å˜åçš„åŸçŸ©é˜µ
>for(int i = 1; i <= n; i++){
>  for(int j = 1; j <= m; j++){
>    a[i][j] = a[i - 1][j] + a[i][j - 1] - a[i - 1][j - 1] + b[i][j];
> ```
>
> **è¯´æ˜ï¼š**
>
> * `insert()`å‡½æ•°è§„å¾‹
>  * ä¸‹æ ‡å‡ºç°`2`çš„éƒ¨åˆ†éƒ½`+1`
>   
>  * èŒƒå›´æœ€å¤§æœ€å°çš„`+=c`ï¼Œå…¶å®ƒ`-=c`
>   
>* å¤æ‚åº¦ç”±`O(m * n)`é™ä¸º`O(1)`
> 
>* æ³¨æ„éå†èŒƒå›´æ˜¯`1 ~ n`

## åŒæŒ‡é’ˆç®—æ³•


